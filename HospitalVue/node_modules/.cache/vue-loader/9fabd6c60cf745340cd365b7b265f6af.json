{"remainingRequest":"E:\\Strive\\HOS\\HospitalVue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Strive\\HOS\\HospitalVue\\src\\views\\DealOrderAgain.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Strive\\HOS\\HospitalVue\\src\\views\\DealOrderAgain.vue","mtime":1741759593567},{"path":"E:\\Strive\\HOS\\HospitalVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689001367240},{"path":"E:\\Strive\\HOS\\HospitalVue\\node_modules\\babel-loader\\lib\\index.js","mtime":1689001368654},{"path":"E:\\Strive\\HOS\\HospitalVue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1689001367240},{"path":"E:\\Strive\\HOS\\HospitalVue\\node_modules\\vue-loader\\lib\\index.js","mtime":1689001369023}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgand0RGVjb2RlIGZyb20gImp3dC1kZWNvZGUiOw0KaW1wb3J0IHsgZ2V0VG9rZW59IGZyb20gIkAvdXRpbHMvc3RvcmFnZS5qcyI7DQppbXBvcnQgcmVxdWVzdCBmcm9tICJAL3V0aWxzL3JlcXVlc3QuanMiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiZGVhbE9yZGVyQWdhaW4iLA0KICBkYXRhKCkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgICBvSWQ6IDEsDQogICAgICAgICAgcElkOiAxLA0KICAgICAgICAgIGRJZDogMCwNCiAgICAgICAgICBwTmFtZTogImFhIiwNCiAgICAgICAgICBwR2VuZGVyOiAiYXMiLA0KICAgICAgICAgIHBQaG9uZTogImFzZCIsDQogICAgICAgICAgZE5hbWU6ICIiLA0KICAgICAgICAgIGRydWdEYXRhOltdLA0KICAgICAgICAgIHNpemU6IDQsDQogICAgICAgICAgcGFnZU51bWJlcjogMSwNCiAgICAgICAgICB0b3RhbDogMywNCiAgICAgICAgICBxdWVyeURydWc6ICIiLA0KICAgICAgICAgIGRydWdCdXlEYXRhOiBbXSwNCiAgICAgICAgICBkcnVnVG90YWxQcmljZTowLA0KICAgICAgICAgIC8v55eF5ZugDQogICAgICAgICAgYWR2aWNlOiAiIiwNCiAgICAgICAgICAvL+mhueebruihqOagvOaVsOaNrg0KICAgICAgICAgIGNoZWNrRGF0YTpbXSwNCiAgICAgICAgICBxdWVyeUNoZWNrOiIiLA0KICAgICAgICAgIGNoZWNrVG90YWw6MywNCiAgICAgICAgICBjaGVja1NpemU6NCwNCiAgICAgICAgICBjaGVja1BhZ2VOdW1iZXI6MSwNCiAgICAgICAgICBjaGVja1RvdGFsUHJpY2U6MCwNCiAgICAgICAgICBjaGVja0J1eURhdGE6W10sDQogICAgICAgICAgLy8g55eF5Zug57yW5YaZ5a+56K+d5qGG5pi+56S65Y+C5pWwDQogICAgICAgICAgYWR2aWNlRm9ybVZpc2libGU6IGZhbHNlLA0KDQogICAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvL+agueaNrmlk5YeP5bCR6I2v54mp5pWw6YePDQogICAgcmVkdWNlRHJ1Z051bWJlcihkcklkLHVzZWROdW1iZXIpew0KICAgICAgcmVxdWVzdC5nZXQoImRydWcvcmVkdWNlRHJ1Z051bWJlciIsIHsNCiAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgZHJJZDogZHJJZCwNCiAgICAgICAgICB1c2VkTnVtYmVyOiB1c2VkTnVtYmVyLA0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICBpZihyZXMuZGF0YS5zdGF0dXMgIT09IDIwMCl7DQogICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLoja/nianmlbDph4/kuI3otrPvvIHvvIEiKTsNCiAgICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICAvL+eCueWHu+aPkOS6pOaMiemSrg0KICAgIHN1Ym1pdENsaWNrKCl7DQoNCiAgICAgIGZvcihsZXQgaT0wO2k8dGhpcy5kcnVnQnV5RGF0YS5sZW5ndGg7aSsrKXsNCiAgICAgICAgIHRoaXMucmVkdWNlRHJ1Z051bWJlcih0aGlzLmRydWdCdXlEYXRhW2ldLmRySWQsIHRoaXMuZHJ1Z0J1eURhdGFbaV0uZHJOdW0pOw0KICAgICAgfTsNCiAgICAgIGxldCBkYXRhID0gew0KICAgICAgICAgIG9JZDogdGhpcy5kYXRhUGFja2FnZSgpLm9JZCwNCiAgICAgICAgLy8gICBwSWQ6IHRoaXMucElkLA0KICAgICAgICAvLyAgIGRJZDogdGhpcy5kSWQsDQogICAgICAgICAgb0FkdmljZTogdGhpcy5kYXRhUGFja2FnZSgpLm9BZHZpY2UsDQogICAgICAgICAgb0RydWc6IHRoaXMuZGF0YVBhY2thZ2UoKS5vRHJ1ZywNCiAgICAgICAgICBvQ2hlY2s6IHRoaXMuZGF0YVBhY2thZ2UoKS5vQ2hlY2ssDQogICAgICAgICAgb1RvdGFsUHJpY2U6IHRoaXMuZGF0YVBhY2thZ2UoKS5vVG90YWxQcmljZSB9DQogICAgICByZXF1ZXN0LnBvc3QoIm9yZGVyL3VwZGF0ZU9yZGVyQnlBZGQiLGRhdGEpDQogICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlcykNCiAgICAgICAgICAgICAgaWYocmVzLmRhdGEuc3RhdHVzICE9PSAyMDApew0KICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+35rGC5L+h5oGv6ZSZ6K+vIik7DQogICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgLy90aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuaPkOS6pOaIkOWKn++8geivt+eZu+W9leezu+e7n+iHquWKqee8tOi0ue+8gSIpOw0KICAgICAgICAgICAgICAgICAgcmVxdWVzdC5nZXQoIm9yZGVyL2ZpbmRUb3RhbFByaWNlIiwgew0KICAgICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICAgICBvSWQ6IGRhdGEub0lkDQogICAgICAgICAgIH0NCiAgICAgICAgIH0pDQogICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICBpZihyZXMuZGF0YS5zdGF0dXMgPT09IDIwMCkNCiAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmj5DkuqTmiJDlip/vvIHor7fnmbvlvZXns7vnu5/oh6rliqnnvLTotLnvvIEiKTsNCg0KICAgICAgICAgfSk7DQoNCg0KDQogICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL29yZGVyVG9kYXkiKTsNCiAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKQ0KICAgICAgfSkNCiAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICBjb25zb2xlLmVycm9yKGVycik7DQogICAgICB9KQ0KDQogICAgfSwNCiAgICAvL+WwgeijheaVsOaNrg0KICAgIGRhdGFQYWNrYWdlKCl7DQogICAgICBsZXQgb0RydWcgPSAiIC8vICI7DQogICAgICBsZXQgb0NoZWNrID0gIiAvLyAiOw0KICAgICAgbGV0IG9Ub3RhbFByaWNlID0gMDsNCiAgICAgIGxldCBvSWQgPSB0aGlzLm9JZDsNCiAgICAgIGxldCBvQWR2aWNlID0gdGhpcy5hZHZpY2U7DQogICAgICBmb3IobGV0IGk9MDtpPHRoaXMuZHJ1Z0J1eURhdGEubGVuZ3RoO2krKyl7DQogICAgICAgIG9EcnVnICs9IHRoaXMuZHJ1Z0J1eURhdGFbaV0uZHJOYW1lKyIqIit0aGlzLmRydWdCdXlEYXRhW2ldLmRyUHJpY2UrIijlhYMpKiIrdGhpcy5kcnVnQnV5RGF0YVtpXS5kck51bSsiICI7DQogICAgICB9Ow0KICAgICAgIGZvcihsZXQgaT0wO2k8dGhpcy5jaGVja0J1eURhdGEubGVuZ3RoO2krKyl7DQogICAgICAgIG9DaGVjayArPSB0aGlzLmNoZWNrQnV5RGF0YVtpXS5jaE5hbWUrIioiK3RoaXMuY2hlY2tCdXlEYXRhW2ldLmNoUHJpY2UrIijlhYMpICI7DQogICAgICB9DQogICAgICBvQ2hlY2sgKz0gIumhueebruaAu+S7tyIrdGhpcy5jaGVja1RvdGFsUHJpY2UrIuWFgyI7DQogICAgICBvRHJ1ZyArPSAi6I2v54mp5oC75Lu3Iit0aGlzLmRydWdUb3RhbFByaWNlKyLlhYMiOw0KICAgICAgb1RvdGFsUHJpY2UgPSB0aGlzLmNoZWNrVG90YWxQcmljZSt0aGlzLmRydWdUb3RhbFByaWNlOw0KICAgICAgcmV0dXJuIHtvSWQsb0FkdmljZSwgb0RydWcsIG9DaGVjaywgb1RvdGFsUHJpY2V9Ow0KDQogICAgfSwNCiAgICAvL+eCueWHu+eXheWboOS/neWtmOaMiemSrg0KICAgIGhvbGRBZHZpY2UoKXsNCiAgICAgIHRoaXMuYWR2aWNlRm9ybVZpc2libGUgPSBmYWxzZTsNCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5L+h5oGv5L+d5a2Y5oiQ5Yqf77yBIik7DQogICAgfSwNCiAgICAvL+aJk+W8gOeXheWboOe8luWGmeWvueivneahhg0KICAgIG9wZW5BZHZpY2UoKXsNCiAgICAgIHRoaXMuYWR2aWNlRm9ybVZpc2libGUgPSB0cnVlOw0KDQogICAgfSwNCiAgICAgIC8v5qOA5p+l5YiX6KGo54K55Ye756e76Zmk5oyJ6ZKuDQogICAgZGVsZXRlQ2hlY2soY2hJZCl7DQogICAgICBmb3IobGV0IGk9MDtpPHRoaXMuY2hlY2tCdXlEYXRhLmxlbmd0aDtpKyspew0KICAgICAgICBpZih0aGlzLmNoZWNrQnV5RGF0YVtpXS5jaElkID09PSBjaElkKXsNCiAgICAgICAgICB0aGlzLmNoZWNrVG90YWxQcmljZSAtPSB0aGlzLmNoZWNrQnV5RGF0YVtpXS5jaFByaWNlOy8v6I2v54mp5Lu35qC85oC76K6hDQogICAgICAgICAgdGhpcy5jaGVja0J1eURhdGEuc3BsaWNlKGksMSkgOy8v77yB77yB77yB77yB77yB77yB5Yig6Zmk5pWw57uE5Lit5LiL5qCH5Li6aeeahOWFg+e0oA0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICAgIC8v5qOA5p+l5YiX6KGo54K55Ye75aKe5Yqg5oyJ6ZKuDQogICAgYWRkQ2hlY2soY2hJZCl7DQogICAgICByZXF1ZXN0LmdldCgiY2hlY2svZmluZENoZWNrIiwgew0KICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICBjaElkOiBjaElkDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICBpZihyZXMuZGF0YS5zdGF0dXMgIT0gMjAwKQ0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLkv6Hmga/or7fmsYLlpLHotKUiKTsNCiAgICAgICAgLy/lkI7nq6/kvKDov4fmnaXnmoTmmK/lr7nosaHvvIzooajmoLznu5HlrprnmoTmlbDnu4QNCiAgICAgICAgICAgdGhpcy5jaGVja0J1eURhdGEucHVzaCgNCiAgICAgICAgICB7DQogICAgICAgICAgICBjaElkOiByZXMuZGF0YS5kYXRhLmNoSWQsDQogICAgICAgICAgICBjaFByaWNlOiByZXMuZGF0YS5kYXRhLmNoUHJpY2UsDQogICAgICAgICAgICBjaE5hbWU6cmVzLmRhdGEuZGF0YS5jaE5hbWUsDQogICAgICAgICAgfQ0KICAgICAgICAgICkNCiAgICAgICAgICAgdGhpcy5jaGVja1RvdGFsUHJpY2UgKz0gcmVzLmRhdGEuZGF0YS5jaFByaWNlOy8v6I2v54mp5Lu35qC85oC76K6hDQogICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLmRhdGEpOw0KICAgICAgfSkNCg0KICAgIH0sDQogICAgICAgIC8v6I2v54mp6aG16Z2i5aSn5bCP5YiH5o2i5pe26Kem5Y+RDQogICAgY2hlY2tTaXplQ2hhbmdlKHNpemUpew0KICAgICAgdGhpcy5jaGVja1NpemUgPSBzaXplOw0KICAgICAgdGhpcy5yZXF1ZXN0Q2hlY2soKTsNCg0KICAgIH0sDQogICAgLy/mo4Dmn6XpobXmlbDliIfmjaLml7bop6blj5ENCiAgICBjaGVja0N1cnJlbnRDaGFuZ2UobnVtKXsNCiAgICAgIHRoaXMuY2hlY2tQYWdlTnVtYmVyID0gbnVtOw0KICAgICAgdGhpcy5yZXF1ZXN0Q2hlY2soKTsNCiAgICB9LA0KICAgIC8v6K+35rGC5qOA5p+l6aG555uuDQogICAgcmVxdWVzdENoZWNrKCl7DQogICAgICByZXF1ZXN0LmdldCgiY2hlY2svZmluZEFsbENoZWNrcyIsIHsNCiAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgc2l6ZTogdGhpcy5jaGVja1NpemUsDQogICAgICAgICAgcGFnZU51bWJlcjogdGhpcy5jaGVja1BhZ2VOdW1iZXIsDQogICAgICAgICAgcXVlcnk6IHRoaXMucXVlcnlDaGVjaw0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgaWYocmVzLmRhdGEuc3RhdHVzICE9IDIwMCkNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6I635Y+W5L+h5oGv5aSx6LSlIik7DQogICAgICAgICAgICAgIHRoaXMuY2hlY2tEYXRhID0gcmVzLmRhdGEuZGF0YS5jaGVja3M7DQogICAgICAgICAgICAgIHRoaXMuY2hlY2tUb3RhbCA9IHJlcy5kYXRhLmRhdGEudG90YWw7DQogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICB9KQ0KICAgIH0sDQogICAgLyoqDQogICAgICog5q2k5aSE6YC76L6R6L6D5aSN5p2C77yM5a655piT5Ye6546w6ZSZ6K+vDQogICAgICovDQogICAgLy/oja/nianliJfooajngrnlh7vnp7vpmaTmjInpkq4NCiAgICBkZWxldGVEcnVnKGRySWQpew0KICAgICAgZm9yKGxldCBpPTA7aTx0aGlzLmRydWdCdXlEYXRhLmxlbmd0aDtpKyspew0KICAgICAgICBpZih0aGlzLmRydWdCdXlEYXRhW2ldLmRySWQgPT09IGRySWQpew0KICAgICAgICAgIGZvcihsZXQgaj0wO2o8dGhpcy5kcnVnRGF0YS5sZW5ndGg7aisrKXsNCiAgICAgICAgICAgIGlmKHRoaXMuZHJ1Z0RhdGFbal0uZHJJZCA9PT0gZHJJZCkNCiAgICAgICAgICAgIHRoaXMuZHJ1Z0RhdGFbal0uZHJOdW1iZXIgKz0xOw0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLmRydWdCdXlEYXRhW2ldLmRyTnVtLT0xOw0KICAgICAgICAgIHRoaXMuZHJ1Z0J1eURhdGFbaV0uZHJTdW0gPSB0aGlzLmRydWdCdXlEYXRhW2ldLmRyUHJpY2UgKiB0aGlzLmRydWdCdXlEYXRhW2ldLmRyTnVtOw0KICAgICAgICAgIHRoaXMuZHJ1Z1RvdGFsUHJpY2UgLT0gdGhpcy5kcnVnQnV5RGF0YVtpXS5kclByaWNlOy8v6I2v54mp5Lu35qC85oC76K6hDQogICAgICAgICAgaWYodGhpcy5kcnVnQnV5RGF0YVtpXS5kck51bSA9PT0gMCkNCiAgICAgICAgICB0aGlzLmRydWdCdXlEYXRhLnNwbGljZShpLDEpIDsvL++8ge+8ge+8ge+8ge+8ge+8geWIoOmZpOaVsOe7hOS4reS4i+agh+S4umnnmoTlhYPntKANCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy/oja/nianliJfooajngrnlh7vlop7liqDmjInpkq4NCiAgICBhZGREcnVnKGRySWQpew0KICAgICAgcmVxdWVzdC5nZXQoImRydWcvZmluZERydWciLCB7DQogICAgICAgIHBhcmFtczogew0KICAgICAgICAgIGRySWQ6IGRySWQNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgIGlmKHJlcy5kYXRhLnN0YXR1cyAhPSAyMDApDQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS/oeaBr+ivt+axguWksei0pSIpOw0KICAgICAgICAvL+WQjuerr+S8oOi/h+adpeeahOaYr+Wvueixoe+8jOihqOagvOe7keWumueahOaVsOe7hA0KICAgICAgICBmb3IobGV0IGk9MDtpPHRoaXMuZHJ1Z0J1eURhdGEubGVuZ3RoO2krKyl7DQogICAgICAgICAgaWYodGhpcy5kcnVnQnV5RGF0YVtpXS5kcklkID09PSByZXMuZGF0YS5kYXRhLmRySWQpew0KICAgICAgICAgIGZvcihsZXQgaj0wO2o8dGhpcy5kcnVnRGF0YS5sZW5ndGg7aisrKXsNCiAgICAgICAgICAgIGlmKHRoaXMuZHJ1Z0RhdGFbal0uZHJJZCA9PT0gcmVzLmRhdGEuZGF0YS5kcklkICYmIHRoaXMuZHJ1Z0RhdGFbal0uZHJOdW1iZXIgPiAwKXsNCiAgICAgICAgICAgIHRoaXMuZHJ1Z0RhdGFbal0uZHJOdW1iZXIgLT0xOw0KICAgICAgICAgICAgdGhpcy5kcnVnQnV5RGF0YVtpXS5kck51bSs9MTsNCiAgICAgICAgICB0aGlzLmRydWdCdXlEYXRhW2ldLmRyU3VtID0gdGhpcy5kcnVnQnV5RGF0YVtpXS5kclByaWNlICogdGhpcy5kcnVnQnV5RGF0YVtpXS5kck51bTsNCiAgICAgICAgICB0aGlzLmRydWdUb3RhbFByaWNlICs9IHRoaXMuZHJ1Z0J1eURhdGFbaV0uZHJQcmljZTsvL+iNr+eJqeS7t+agvOaAu+iuoQ0KICAgICAgICAgIC8vcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICByZXR1cm47DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIGZvcihsZXQgaj0wO2o8dGhpcy5kcnVnRGF0YS5sZW5ndGg7aisrKXsNCiAgICAgICAgICAgIGlmKHRoaXMuZHJ1Z0RhdGFbal0uZHJJZCA9PT0gcmVzLmRhdGEuZGF0YS5kcklkICYmIHRoaXMuZHJ1Z0RhdGFbal0uZHJOdW1iZXIgPD0gMCkNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICB9DQogICAgICAgICAgIHRoaXMuZHJ1Z0J1eURhdGEucHVzaCgNCiAgICAgICAgICB7DQogICAgICAgICAgICBkcklkOiByZXMuZGF0YS5kYXRhLmRySWQsDQogICAgICAgICAgICBkclByaWNlOiByZXMuZGF0YS5kYXRhLmRyUHJpY2UsDQogICAgICAgICAgICBkck5hbWU6cmVzLmRhdGEuZGF0YS5kck5hbWUsDQogICAgICAgICAgICBkck51bTogMSwNCiAgICAgICAgICAgIGRyU3VtOiByZXMuZGF0YS5kYXRhLmRyUHJpY2UsDQogICAgICAgICAgfQ0KICAgICAgICAgICkNCiAgICAgICAgICBmb3IobGV0IGo9MDtqPHRoaXMuZHJ1Z0RhdGEubGVuZ3RoO2orKyl7DQogICAgICAgICAgICBpZih0aGlzLmRydWdEYXRhW2pdLmRySWQgPT09IHJlcy5kYXRhLmRhdGEuZHJJZCApDQogICAgICAgICAgICB0aGlzLmRydWdEYXRhW2pdLmRyTnVtYmVyIC09MTsNCiAgICAgICAgICB9DQogICAgICAgICAgIHRoaXMuZHJ1Z1RvdGFsUHJpY2UgKz0gcmVzLmRhdGEuZGF0YS5kclByaWNlOy8v6I2v54mp5Lu35qC85oC76K6hDQoNCg0KICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhKTsNCiAgICAgIH0pDQoNCiAgICB9LA0KICAgIC8v6I2v54mp6aG16Z2i5aSn5bCP5YiH5o2i5pe26Kem5Y+RDQogICAgaGFuZGxlU2l6ZUNoYW5nZShzaXplKXsNCiAgICAgIHRoaXMuc2l6ZSA9IHNpemU7DQogICAgICB0aGlzLnJlcXVlc3REcnVnKCk7DQoNCiAgICB9LA0KICAgIC8v6I2v54mp6aG15pWw5YiH5o2i5pe26Kem5Y+RDQogICAgaGFuZGxlQ3VycmVudENoYW5nZShudW0pew0KICAgICAgdGhpcy5wYWdlTnVtYmVyID0gbnVtOw0KICAgICAgdGhpcy5yZXF1ZXN0RHJ1ZygpOw0KICAgIH0sDQoNCiAgICAvL+iOt+WPluiNr+eJqeWIl+ihqA0KICAgIHJlcXVlc3REcnVnKCl7DQogICAgICByZXF1ZXN0LmdldCgiZHJ1Zy9maW5kQWxsRHJ1Z3MiLCB7DQogICAgICAgIHBhcmFtczogew0KICAgICAgICAgIHNpemU6IHRoaXMuc2l6ZSwNCiAgICAgICAgICBwYWdlTnVtYmVyOiB0aGlzLnBhZ2VOdW1iZXIsDQogICAgICAgICAgcXVlcnk6IHRoaXMucXVlcnlEcnVnDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgaWYocmVzLmRhdGEuc3RhdHVzICE9IDIwMCkNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6I635Y+W5L+h5oGv5aSx6LSlIik7DQogICAgICAgICAgICAgIHRoaXMuZHJ1Z0RhdGEgPSByZXMuZGF0YS5kYXRhLmRydWdzOw0KICAgICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEuZGF0YS50b3RhbDsNCg0KDQogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICB9KQ0KICAgIH0sDQogICAgICAvL+iOt+WPluaCo+iAheS/oeaBrw0KICAgICAgcmVxdWVzdFBhdGllbnQoKXsNCiAgICAgICAgICByZXF1ZXN0LmdldCgiZG9jdG9yL2ZpbmRQYXRpZW50QnlJZCIsIHsNCiAgICAgICAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgICAgICAgICBwSWQ6IHRoaXMucElkDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgICAgICAgICBpZihyZXMuZGF0YS5zdGF0dXMgIT0gMjAwKQ0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLojrflj5bkv6Hmga/lpLHotKUiKTsNCiAgICAgICAgICAgICAgdGhpcy5wTmFtZSA9IHJlcy5kYXRhLmRhdGEucE5hbWU7DQogICAgICAgICAgICAgIHRoaXMucEdlbmRlciA9IHJlcy5kYXRhLmRhdGEucEdlbmRlcjsNCiAgICAgICAgICAgICAgdGhpcy5wUGhvbmUgPSByZXMuZGF0YS5kYXRhLnBQaG9uZTsNCg0KICAgICAgICAgIH0pDQoNCiAgICAgIH0sDQogICAgLy90b2tlbuino+eggQ0KICAgIHRva2VuRGVjb2RlKHRva2VuKXsNCiAgICAgIGlmICh0b2tlbiAhPT0gbnVsbCkNCiAgICAgIHJldHVybiBqd3REZWNvZGUodG9rZW4pOw0KICAgIH0sDQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5kTmFtZSA9IHRoaXMudG9rZW5EZWNvZGUoZ2V0VG9rZW4oKSkuZE5hbWU7DQogICAgdGhpcy5kSWQgPSB0aGlzLnRva2VuRGVjb2RlKGdldFRva2VuKCkpLmRJZDsNCiAgICB0aGlzLm9JZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5Lm9JZDsNCiAgICB0aGlzLnBJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnBJZDsNCiAgICB0aGlzLnJlcXVlc3RQYXRpZW50KCk7DQogICAgdGhpcy5yZXF1ZXN0RHJ1ZygpOw0KICAgIHRoaXMucmVxdWVzdENoZWNrKCk7DQogIH0sDQp9Ow0K"},{"version":3,"sources":["DealOrderAgain.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DealOrderAgain.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n<!-- 医生-处理订单 -->\r\n  <div>\r\n  <el-card>\r\n    <el-row>\r\n      <el-col :span=\"7\">\r\n          挂号单号：<el-input disabled v-model=\"oId\" class=\"orderInput\"></el-input>\r\n      </el-col>\r\n      <el-col :span=\"7\">\r\n          患者账号：<el-input disabled v-model=\"pId\" class=\"orderInput\"></el-input></el-col>\r\n      <el-col :span=\"7\">\r\n          患者姓名：<el-input disabled v-model=\"pName\" class=\"orderInput\"></el-input>\r\n      </el-col>\r\n        <el-col :span=\"3\">\r\n          <el-button type=\"success\"\r\n                  style=\"font-size: 18px;\"\r\n                  icon=\"iconfont icon-r-paper\" @click=\"submitClick\"> 提交</el-button>\r\n      </el-col>\r\n    </el-row>\r\n    <el-row>\r\n          <el-col :span=\"7\">\r\n          患者性别：<el-input disabled v-model=\"pGender\" class=\"orderInput\"></el-input>\r\n      </el-col>\r\n      <el-col :span=\"7\">\r\n          联系方式：<el-input disabled v-model=\"pPhone\" class=\"orderInput\"></el-input></el-col>\r\n      <el-col :span=\"7\">\r\n          医生姓名：<el-input disabled v-model=\"dName\" class=\"orderInput\"></el-input>\r\n      </el-col>\r\n              <el-col :span=\"3\">\r\n          <el-button type=\"success\"\r\n                  style=\"font-size: 18px;\" @click=\"openAdvice\">\r\n                  <i class=\"el-icon-circle-plus-outline\" style=\"font-size: 20px;\"></i>\r\n                  诊断/意见</el-button>\r\n      </el-col>\r\n    </el-row>\r\n      <!-- 药物表格 -->\r\n      <el-row>\r\n        <el-col :span=\"12\">\r\n          <el-input v-model=\"queryDrug\" placeholder=\"请输入名称查询\" class=\"drugInput\">\r\n            <el-button\r\n            slot=\"append\"\r\n            icon=\"el-icon-search\"\r\n            @click=\"requestDrug\"\r\n          ></el-button>\r\n          </el-input>\r\n      <el-table :data=\"drugData\" stripe border>\r\n        <el-table-column label=\"编号\" prop=\"drId\"></el-table-column>\r\n        <el-table-column label=\"名称\" prop=\"drName\"></el-table-column>\r\n        <el-table-column label=\"剩余数量\" prop=\"drNumber\"></el-table-column>\r\n        <el-table-column label=\"单位\" prop=\"drUnit\"></el-table-column>\r\n        <el-table-column label=\"单价\" prop=\"drPrice\"></el-table-column>\r\n        <el-table-column label=\"操作\" width=\"120\" fixed=\"right\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"success\"\r\n                  style=\"font-size: 14px;\" @click=\"addDrug(scope.row.drId)\">\r\n                  <i class=\"el-icon-circle-plus-outline\" style=\"font-size: 16px;\"></i>\r\n                  增加</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <!-- 分页 -->\r\n      <el-pagination\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n  background\r\n  layout=\"total, sizes, prev, pager, next\"\r\n  :total=\"total\"\r\n  :page-size=\"size\"\r\n  :page-sizes=\"[1, 2, 4, 8, 16]\"\r\n  >\r\n\r\n</el-pagination>\r\n<el-row></el-row>\r\n      </el-col>\r\n      <!-- 右边已选择的药物 -->\r\n      <el-col :span=\"12\" class=\"drugRigth\">\r\n        <el-table stripe border :data=\"drugBuyData\" class=\"rigthTable\">\r\n          <el-table-column label=\"编号\" prop=\"drId\"></el-table-column>\r\n          <el-table-column label=\"名称\" prop=\"drName\"></el-table-column>\r\n           <el-table-column label=\"单价\" prop=\"drPrice\"></el-table-column>\r\n            <el-table-column label=\"数量\" prop=\"drNum\"></el-table-column>\r\n             <el-table-column label=\"小记\" prop=\"drSum\"></el-table-column>\r\n             <el-table-column label=\"操作\" width=\"120\" fixed=\"right\">\r\n               <template slot-scope=\"scope\">\r\n                 <el-button type=\"danger\"\r\n                  style=\"font-size: 14px;\"\r\n                  icon=\"el-icon-delete\" @click=\"deleteDrug(scope.row.drId)\"> 移除</el-button>\r\n               </template>\r\n             </el-table-column>\r\n        </el-table>\r\n        <el-tag>共计：{{drugTotalPrice}}元</el-tag>\r\n\r\n      </el-col>\r\n\r\n</el-row>\r\n<!-- 检查项目编写 -->\r\n<el-row>\r\n      <el-col :span=\"12\">\r\n        <el-input v-model=\"queryCheck\" placeholder=\"请输入名称查询\" class=\"drugInput\">\r\n            <el-button\r\n            slot=\"append\"\r\n            icon=\"el-icon-search\"\r\n            @click=\"requestCheck\"\r\n          ></el-button>\r\n          </el-input>\r\n          <el-table stripe border :data=\"checkData\">\r\n            <el-table-column label=\"编号\" prop=\"chId\"></el-table-column>\r\n             <el-table-column label=\"项目\" prop=\"chName\"></el-table-column>\r\n              <el-table-column label=\"价格\" prop=\"chPrice\"></el-table-column>\r\n              <el-table-column label=\"操作\" width=\"120\" fixed=\"right\">\r\n                <template slot-scope=\"scope\">\r\n                  <el-button type=\"success\"\r\n                  style=\"font-size: 14px;\" @click=\"addCheck(scope.row.chId)\">\r\n                  <i class=\"el-icon-circle-plus-outline\" style=\"font-size: 16px;\"></i>\r\n                  增加</el-button>\r\n                </template>\r\n              </el-table-column>\r\n          </el-table>\r\n                <!-- 分页 -->\r\n      <el-pagination\r\n      @size-change=\"checkSizeChange\"\r\n      @current-change=\"checkCurrentChange\"\r\n  background\r\n  layout=\"total, prev, pager, next\"\r\n  :total=\"checkTotal\"\r\n  :page-size=\"checkSize\"\r\n  >\r\n      </el-pagination>\r\n      </el-col>\r\n      <!-- 右边已选择的检查 -->\r\n      <el-col :span=\"12\" class=\"drugRigth\">\r\n        <el-table stripe border class=\"rigthTable\" :data=\"checkBuyData\">\r\n          <el-table-column label=\"编号\" prop=\"chId\"></el-table-column>\r\n             <el-table-column label=\"项目\" prop=\"chName\"></el-table-column>\r\n              <el-table-column label=\"价格\" prop=\"chPrice\"></el-table-column>\r\n              <el-table-column label=\"操作\" width=\"120\" fixed=\"right\">\r\n                <template slot-scope=\"scope\">\r\n                  <el-button type=\"danger\"\r\n                  style=\"font-size: 14px;\"\r\n                  icon=\"el-icon-delete\" @click=\"deleteCheck(scope.row.chId)\"> 移除</el-button>\r\n                </template>\r\n              </el-table-column>\r\n              </el-table>\r\n              <el-tag>共计：{{checkTotalPrice}}元</el-tag>\r\n      </el-col>\r\n    </el-row>\r\n\r\n  </el-card>\r\n\r\n\r\n<!-- 病因编写对话框 -->\r\n <el-dialog title=\"诊断及医生建议编写\" :visible.sync=\"adviceFormVisible\">\r\n   <el-input\r\n  type=\"textarea\"\r\n  :rows=\"8\"\r\n  placeholder=\"请输入内容\"\r\n  v-model=\"advice\">\r\n</el-input>\r\n<div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"adviceFormVisible = false\" style=\"font-size: 18px;\"><i class=\"el-icon-close\" style=\"font-size: 20px;\"></i> 取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"holdAdvice\"\r\n          >保存</el-button\r\n        >\r\n      </div>\r\n </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\nimport jwtDecode from \"jwt-decode\";\r\nimport { getToken} from \"@/utils/storage.js\";\r\nimport request from \"@/utils/request.js\";\r\nexport default {\r\n  name: \"dealOrderAgain\",\r\n  data() {\r\n      return {\r\n          oId: 1,\r\n          pId: 1,\r\n          dId: 0,\r\n          pName: \"aa\",\r\n          pGender: \"as\",\r\n          pPhone: \"asd\",\r\n          dName: \"\",\r\n          drugData:[],\r\n          size: 4,\r\n          pageNumber: 1,\r\n          total: 3,\r\n          queryDrug: \"\",\r\n          drugBuyData: [],\r\n          drugTotalPrice:0,\r\n          //病因\r\n          advice: \"\",\r\n          //项目表格数据\r\n          checkData:[],\r\n          queryCheck:\"\",\r\n          checkTotal:3,\r\n          checkSize:4,\r\n          checkPageNumber:1,\r\n          checkTotalPrice:0,\r\n          checkBuyData:[],\r\n          // 病因编写对话框显示参数\r\n          adviceFormVisible: false,\r\n\r\n      }\r\n  },\r\n  methods: {\r\n    //根据id减少药物数量\r\n    reduceDrugNumber(drId,usedNumber){\r\n      request.get(\"drug/reduceDrugNumber\", {\r\n        params: {\r\n          drId: drId,\r\n          usedNumber: usedNumber,\r\n        }\r\n      })\r\n      .then(res => {\r\n       if(res.data.status !== 200){\r\n         this.$message.error(\"药物数量不足！！\");\r\n         }\r\n      })\r\n    },\r\n    //点击提交按钮\r\n    submitClick(){\r\n\r\n      for(let i=0;i<this.drugBuyData.length;i++){\r\n         this.reduceDrugNumber(this.drugBuyData[i].drId, this.drugBuyData[i].drNum);\r\n      };\r\n      let data = {\r\n          oId: this.dataPackage().oId,\r\n        //   pId: this.pId,\r\n        //   dId: this.dId,\r\n          oAdvice: this.dataPackage().oAdvice,\r\n          oDrug: this.dataPackage().oDrug,\r\n          oCheck: this.dataPackage().oCheck,\r\n          oTotalPrice: this.dataPackage().oTotalPrice }\r\n      request.post(\"order/updateOrderByAdd\",data)\r\n      .then(res => {\r\n          console.log(res)\r\n              if(res.data.status !== 200){\r\n         this.$message.error(\"请求信息错误\");\r\n         return;\r\n              }\r\n\r\n         //this.$message.success(\"提交成功！请登录系统自助缴费！\");\r\n                  request.get(\"order/findTotalPrice\", {\r\n           params: {\r\n             oId: data.oId\r\n           }\r\n         })\r\n         .then(res => {\r\n           if(res.data.status === 200)\r\n           this.$message.success(\"提交成功！请登录系统自助缴费！\");\r\n\r\n         });\r\n\r\n\r\n\r\n         this.$router.push(\"/orderToday\");\r\n         console.log(res.data)\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n      })\r\n\r\n    },\r\n    //封装数据\r\n    dataPackage(){\r\n      let oDrug = \" // \";\r\n      let oCheck = \" // \";\r\n      let oTotalPrice = 0;\r\n      let oId = this.oId;\r\n      let oAdvice = this.advice;\r\n      for(let i=0;i<this.drugBuyData.length;i++){\r\n        oDrug += this.drugBuyData[i].drName+\"*\"+this.drugBuyData[i].drPrice+\"(元)*\"+this.drugBuyData[i].drNum+\" \";\r\n      };\r\n       for(let i=0;i<this.checkBuyData.length;i++){\r\n        oCheck += this.checkBuyData[i].chName+\"*\"+this.checkBuyData[i].chPrice+\"(元) \";\r\n      }\r\n      oCheck += \"项目总价\"+this.checkTotalPrice+\"元\";\r\n      oDrug += \"药物总价\"+this.drugTotalPrice+\"元\";\r\n      oTotalPrice = this.checkTotalPrice+this.drugTotalPrice;\r\n      return {oId,oAdvice, oDrug, oCheck, oTotalPrice};\r\n\r\n    },\r\n    //点击病因保存按钮\r\n    holdAdvice(){\r\n      this.adviceFormVisible = false;\r\n      this.$message.success(\"信息保存成功！\");\r\n    },\r\n    //打开病因编写对话框\r\n    openAdvice(){\r\n      this.adviceFormVisible = true;\r\n\r\n    },\r\n      //检查列表点击移除按钮\r\n    deleteCheck(chId){\r\n      for(let i=0;i<this.checkBuyData.length;i++){\r\n        if(this.checkBuyData[i].chId === chId){\r\n          this.checkTotalPrice -= this.checkBuyData[i].chPrice;//药物价格总计\r\n          this.checkBuyData.splice(i,1) ;//！！！！！！删除数组中下标为i的元素\r\n        }\r\n      }\r\n    },\r\n      //检查列表点击增加按钮\r\n    addCheck(chId){\r\n      request.get(\"check/findCheck\", {\r\n        params: {\r\n          chId: chId\r\n        }\r\n      })\r\n      .then(res => {\r\n        if(res.data.status != 200)\r\n        this.$message.error(\"信息请求失败\");\r\n        //后端传过来的是对象，表格绑定的数组\r\n           this.checkBuyData.push(\r\n          {\r\n            chId: res.data.data.chId,\r\n            chPrice: res.data.data.chPrice,\r\n            chName:res.data.data.chName,\r\n          }\r\n          )\r\n           this.checkTotalPrice += res.data.data.chPrice;//药物价格总计\r\n        console.log(res.data.data);\r\n      })\r\n\r\n    },\r\n        //药物页面大小切换时触发\r\n    checkSizeChange(size){\r\n      this.checkSize = size;\r\n      this.requestCheck();\r\n\r\n    },\r\n    //检查页数切换时触发\r\n    checkCurrentChange(num){\r\n      this.checkPageNumber = num;\r\n      this.requestCheck();\r\n    },\r\n    //请求检查项目\r\n    requestCheck(){\r\n      request.get(\"check/findAllChecks\", {\r\n        params: {\r\n          size: this.checkSize,\r\n          pageNumber: this.checkPageNumber,\r\n          query: this.queryCheck\r\n        }\r\n      })\r\n      .then(res => {\r\n        if(res.data.status != 200)\r\n              this.$message.error(\"获取信息失败\");\r\n              this.checkData = res.data.data.checks;\r\n              this.checkTotal = res.data.data.total;\r\n        console.log(res);\r\n      })\r\n    },\r\n    /**\r\n     * 此处逻辑较复杂，容易出现错误\r\n     */\r\n    //药物列表点击移除按钮\r\n    deleteDrug(drId){\r\n      for(let i=0;i<this.drugBuyData.length;i++){\r\n        if(this.drugBuyData[i].drId === drId){\r\n          for(let j=0;j<this.drugData.length;j++){\r\n            if(this.drugData[j].drId === drId)\r\n            this.drugData[j].drNumber +=1;\r\n          }\r\n          this.drugBuyData[i].drNum-=1;\r\n          this.drugBuyData[i].drSum = this.drugBuyData[i].drPrice * this.drugBuyData[i].drNum;\r\n          this.drugTotalPrice -= this.drugBuyData[i].drPrice;//药物价格总计\r\n          if(this.drugBuyData[i].drNum === 0)\r\n          this.drugBuyData.splice(i,1) ;//！！！！！！删除数组中下标为i的元素\r\n        }\r\n      }\r\n    },\r\n    //药物列表点击增加按钮\r\n    addDrug(drId){\r\n      request.get(\"drug/findDrug\", {\r\n        params: {\r\n          drId: drId\r\n        }\r\n      })\r\n      .then(res => {\r\n        if(res.data.status != 200)\r\n        this.$message.error(\"信息请求失败\");\r\n        //后端传过来的是对象，表格绑定的数组\r\n        for(let i=0;i<this.drugBuyData.length;i++){\r\n          if(this.drugBuyData[i].drId === res.data.data.drId){\r\n          for(let j=0;j<this.drugData.length;j++){\r\n            if(this.drugData[j].drId === res.data.data.drId && this.drugData[j].drNumber > 0){\r\n            this.drugData[j].drNumber -=1;\r\n            this.drugBuyData[i].drNum+=1;\r\n          this.drugBuyData[i].drSum = this.drugBuyData[i].drPrice * this.drugBuyData[i].drNum;\r\n          this.drugTotalPrice += this.drugBuyData[i].drPrice;//药物价格总计\r\n          //return;\r\n            }\r\n          }\r\n          return;\r\n          }\r\n        }\r\n        for(let j=0;j<this.drugData.length;j++){\r\n            if(this.drugData[j].drId === res.data.data.drId && this.drugData[j].drNumber <= 0)\r\n            return;\r\n          }\r\n           this.drugBuyData.push(\r\n          {\r\n            drId: res.data.data.drId,\r\n            drPrice: res.data.data.drPrice,\r\n            drName:res.data.data.drName,\r\n            drNum: 1,\r\n            drSum: res.data.data.drPrice,\r\n          }\r\n          )\r\n          for(let j=0;j<this.drugData.length;j++){\r\n            if(this.drugData[j].drId === res.data.data.drId )\r\n            this.drugData[j].drNumber -=1;\r\n          }\r\n           this.drugTotalPrice += res.data.data.drPrice;//药物价格总计\r\n\r\n\r\n        console.log(res.data.data);\r\n      })\r\n\r\n    },\r\n    //药物页面大小切换时触发\r\n    handleSizeChange(size){\r\n      this.size = size;\r\n      this.requestDrug();\r\n\r\n    },\r\n    //药物页数切换时触发\r\n    handleCurrentChange(num){\r\n      this.pageNumber = num;\r\n      this.requestDrug();\r\n    },\r\n\r\n    //获取药物列表\r\n    requestDrug(){\r\n      request.get(\"drug/findAllDrugs\", {\r\n        params: {\r\n          size: this.size,\r\n          pageNumber: this.pageNumber,\r\n          query: this.queryDrug\r\n        }\r\n      })\r\n      .then(res => {\r\n         if(res.data.status != 200)\r\n              this.$message.error(\"获取信息失败\");\r\n              this.drugData = res.data.data.drugs;\r\n              this.total = res.data.data.total;\r\n\r\n\r\n        console.log(res);\r\n      })\r\n    },\r\n      //获取患者信息\r\n      requestPatient(){\r\n          request.get(\"doctor/findPatientById\", {\r\n              params: {\r\n                  pId: this.pId\r\n              }\r\n          })\r\n          .then(res => {\r\n            console.log(res);\r\n              if(res.data.status != 200)\r\n              this.$message.error(\"获取信息失败\");\r\n              this.pName = res.data.data.pName;\r\n              this.pGender = res.data.data.pGender;\r\n              this.pPhone = res.data.data.pPhone;\r\n\r\n          })\r\n\r\n      },\r\n    //token解码\r\n    tokenDecode(token){\r\n      if (token !== null)\r\n      return jwtDecode(token);\r\n    },\r\n  },\r\n  created() {\r\n    this.dName = this.tokenDecode(getToken()).dName;\r\n    this.dId = this.tokenDecode(getToken()).dId;\r\n    this.oId = this.$route.query.oId;\r\n    this.pId = this.$route.query.pId;\r\n    this.requestPatient();\r\n    this.requestDrug();\r\n    this.requestCheck();\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n\r\n// 让文字居中\r\n.drugRigth{\r\n  text-align: center;\r\n}\r\n.el-tag{\r\n  margin: 8px;\r\n}\r\n.rigthTable{\r\n  margin-top: 56px;\r\n  margin-left: 8px;\r\n}\r\n.drugInput{\r\n  margin-top: 8px;\r\n  margin-bottom: 8px;\r\n}\r\n.el-row{\r\n    margin: 5px;\r\n}\r\n.orderInput{\r\n    width: 240px;\r\n}\r\n.el-pagination{\r\n  margin: 8px;\r\n}\r\n</style>"]}]}